# 🏝️ 圣多美岛农民

**São Tomé Island Farmers** - 一个基于生态平衡的多人策略游戏

---

## 📖 简介

在圣多美岛上，你是一名努力生存的农民。通过种植可可、砍伐树木、猎捕蜗牛来积累财富，但要小心生态压力！游戏考验你的资源管理能力和战略规划。

## ✨ 特性

- 🎮 **多种游戏模式**
  - 本地热座模式：面对面游玩
  - 在线多人模式：支持远程联机
  - 旁观者模式：GM 可以查看游戏进程

- 🌍 **生态平衡系统**
  - 动态的树木和蜗牛数量
  - 环境罚款机制
  - 生活成本随生态变化

- 🤝 **合作社系统**
  - 第 2 轮可直接加入
  - 第 3 轮后需申请
  - 合作社成员可共享土地资源

- 📊 **完整游戏总结**
  - 生态系统变化追踪
  - 历史数据时间线
  - 完整游戏日志

## 🛠️ 技术栈

- **前端**: React 19 + TypeScript + Vite
- **游戏引擎**: boardgame.io
- **样式**: CSS3 (自定义主题)

## 🚀 快速开始

### 安装依赖

```bash
npm install
```

### 开发模式

启动前端和服务器（同时运行）：

```bash
npm run dev:all
```

或分别启动：

```bash
# 启动前端开发服务器
npm run dev

# 启动游戏服务器（新终端）
npm run server
```

### 构建生产版本

```bash
npm run build
```

### 预览生产版本

```bash
npm run preview
```

## 🎯 游戏模式

### 本地热座模式

所有玩家共用一台设备，轮流进行操作。适合与朋友面对面游玩。

### 在线多人模式

**创建房间**：
1. 选择"创建房间"模式
2. 设置玩家人数（2-5 人）
3. 点击"创建房间"
4. 分享房间 ID 给其他玩家

**加入房间**：
1. 选择"加入房间"模式
2. 输入房间 ID
3. 输入你的名字
4. 选择玩家位置或作为旁观者加入

## 📁 项目结构

```
src/
├── game/
│   ├── Board.tsx          # 主游戏面板
│   ├── PlayerPanel.tsx    # 玩家面板组件
│   ├── Lobby.tsx          # 游戏大厅
│   ├── game.ts            # 游戏逻辑定义
│   ├── game_logic.ts      # 游戏规则实现
│   ├── core_data_structure.ts  # 数据结构定义
│   └── game.css           # 游戏样式
├── App.tsx                # 应用入口
└── main.tsx              # 应用启动

server/
└── index.ts              # 游戏服务器
```

## 🎲 游戏规则

### 游戏阶段

1. **市政厅讨论阶段** - 支付生活成本或送工人去葡萄牙
2. **行动阶段** - 根据工人数量执行行动
3. **秘密行动阶段** - 所有玩家同时选择秘密行动
4. **结算阶段** - 计算生态变化和资源更新

### 主要行动

- 🌾 **种植可可** - 在自己的土地或合作社成员土地上种植
- 🪓 **伐木** - 在缓冲区伐木获得木材
- 🐌 **捕猎蜗牛** - 在核心区或缓冲区捕猎获得可可
- 💰 **转移资源** - 与其他玩家交易资源（有限制）
- 🤝 **加入合作社** - 获得合作社特权

### 生态影响

- 树木数量影响蜗牛繁殖
- 蜗牛数量影响生活成本
- 生态失衡会触发环境罚款

## 🔧 开发说明

### 服务器配置

默认服务器地址会自动设置为当前页面 URL，端口改为 8000。例如：
- 如果访问 `http://example.com:3000`，默认服务器为 `http://example.com:8000`

### 环境要求

- Node.js 18+
- npm 或 yarn

## 📝 许可证

本项目为私有项目。

---

**享受游戏！** 🎉

